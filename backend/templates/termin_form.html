{% extends "base.html" %}
{% block title %}{{ 'Uredi' if termin else 'Novi' }} termin{% endblock %}

{% block content %}
  <h2>{{ 'Uredi' if termin else 'Novi' }} termin</h2>
  <form method="post">
    {% if termin %}
      <input type="hidden" name="id" value="{{ termin.id }}">
    {% endif %}

    <!-- Select vozilo -->
    <div class="mb-3">
      <label for="vozilo_id" class="form-label">Vozilo:</label>
      <select id="vozilo_id" name="vozilo_id" class="form-control" required>
        {% for v in vozila %}
          <option value="{{ v.id }}" {% if termin and termin.vozilo_id==v.id %}selected{% endif %}>
            {{ v.id }} - {{ v.marka }} {{ v.model }}
          </option>
        {% endfor %}
      </select>
    </div>

    <!-- Datum od/do -->
    <div class="mb-3">
      <label for="datum_od" class="form-label">Datum od:</label>
      <input id="datum_od" name="datum_od" class="form-control" type="date"
             value="{{ termin.datum_od if termin else '' }}" required>
    </div>
    <div class="mb-3">
      <label for="datum_do" class="form-label">Datum do:</label>
      <input id="datum_do" name="datum_do" class="form-control" type="date"
             value="{{ termin.datum_do if termin else '' }}" required>
    </div>

    <!-- Select status -->
    <div class="mb-3">
      <label for="status" class="form-label">Status:</label>
      <select id="status" name="status" class="form-control" required>
        {% for opcija in ['Na čekanju','Potvrđen','Otkazan','Završen'] %}
          <option value="{{ opcija }}" {% if termin and termin.status==opcija %}selected{% endif %}>
            {{ opcija }}
          </option>
        {% endfor %}
      </select>
    </div>

    <button class="btn btn-success">{{ 'Spremi' if termin else 'Dodaj' }}</button>
  </form>
{% endblock %}